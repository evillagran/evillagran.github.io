<!DOCTYPE html>
<html lang="es">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Gotencool's blog</title>

            <link href="http://blog.gotencool.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Gotencool's blog Full Atom Feed" />
            <link href="http://blog.gotencool.com/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title="Gotencool's blog Categories Atom Feed" />

        <!-- Bootstrap Core CSS -->
        <link href="./theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="./theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="./theme/css/code_blocks/darkly.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->




        <meta name="tags" contents="Linux" />
        <meta name="tags" contents="Fedora" />
        <meta name="tags" contents="internet" />


			<meta property="og:locale" content="es">
		<meta property="og:site_name" content="Gotencool's blog">

	<meta property="og:type" content="article">
	<meta property="article:author" content="">
	<meta property="og:url" content="./configurar-un-bridge-para-las-maquinas-virtuales.html">
	<meta property="og:title" content="Configurar un Bridge para las máquinas virtuales.">
	<meta property="og:description" content="">
	<meta property="og:image" content="./">
	<meta property="article:published_time" content="2008-09-06 00:00:00-04:00">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="./">Gotencool's blog</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <header class="intro-header" style="background-image: url('./theme/images/grua.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Configurar un Bridge para las máquinas virtuales.</h1>
                        <span class="meta">Posted on sáb 06 septiembre 2008
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <p>En post de virtualización express indiqué que en una de las etapas debemos seleccionar el tipo de red entre "Red Virtual" o "Dispositivo compartido".<br>
La diferencia entre ellos es que "Red Virtual" genera una red y a cada máquina virtual en ella le asigna una IP de dicha red haciendo NAT hacia la red doméstica. "Dispositivo compartido" por otra parte no deja la tarjeta de red de la máquina virtual "conectada directamente" a tu red doméstica (la IP es asignada por tu router).<br>
Puede ser que quieras utilizar la opción de "Dispositivo compartido" pero que el menú no te muestre ninguno. Para ello deberás generar un bridge.  </p>
<ol>
<li>Desactivemos NetworkManager  </li>
</ol>
<p>/etc/init.d/NetworkManager stop<br>
chkconfig NetworkManager off</p>
<ol>
<li>Creamos los scripts de red  </li>
</ol>
<h1>script para eth0: /etc/sysconfig/network-scripts/ifcfg-eth0</h1>
<p>DEVICE=eth0<br>
HWADDR=00:16:76:D6:C9:45 #MAC de eth0<br>
ONBOOT=yes<br>
BRIDGE=br0  </p>
<h1>script para el bridge br0: /etc/sysconfig/network-scripts/ifcfg-br0</h1>
<p>DEVICE=br0<br>
TYPE=Bridge<br>
BOOTPROTO=dhcp<br>
ONBOOT=yes  </p>
<ol>
<li>Configuramos iptables para que haga forward de todo el tráfico a br0  </li>
</ol>
<p>echo "-I FORWARD -m physdev --physdev-is-bridged -j ACCEPT" &gt; /etc/sysconfig/iptables-forward-bridged<br>
lokkit --custom-rules=ipv4:filter:/etc/sysconfig/iptables-forward-bridged</p>
<ol>
<li>Reiniciamos los servicios  </li>
</ol>
<p>/etc/init.d/network restart<br>
/etc/init.d/libvirtd restart</p>
<p>Ahora ya podemos configurar nuestra máquina para que use el bridge. Puede que sea necesario crear la máquina como root para que el bridge esté disponible.  </p>
<p>UPDATE:<br>
Para que lo anterior funcione bien, iptables debe desactivarse antes de realizar las acciones antes señaladas. Para apagar iptables debemos ejecutar:  </p>
<p>/etc/init.d/iptables stop</p>
    </article>

    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
		<div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="./tags">
                                <span class="">
                                    Tags
                                </span>
                            </a>
                        </li>
                        <li>
                                <span class=""> - </span>
                        </li>
                        <li>
                            <a href="./categories">
                                <span class="">
                                    Categorías
                                </span>
                            </a>
                        </li>
		   </ul>
<!--<ul class="list-inline text-center">
                        <li>
                            <a href="">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-flickr fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
		    </ul> -->
                    <p class="copyright text-muted">Blog powered by <a href="http://getpelican.com">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="./theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="./theme/js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="./theme/js/clean-blog.min.js"></script>

</body>

</html>